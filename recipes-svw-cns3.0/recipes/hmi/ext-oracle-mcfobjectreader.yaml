inherit: [packing-module]

metaEnvironment:
   PKG_LICENSE: "MicroDoc Computersysteme GmbH"
   PKG_VERSION: "1.0.0"
   PKG_NAME: "oracle-mfcobjectreader"
   PKG_PATCH_VERSION: "1.0.0"
   PKG_RESPONSIBLE: "MMI-HMI"

checkoutSCM:
   scm: git
   url: git@${DEFAULT_PCC_GIT_SERVER}:mib3-hmi/ext.oracle.mcfobjectreader.git
   tag: mqb_sop1_eu-1.0.0

buildScript: |
   mkdir -p java/lib/ext java/lib/aarch64
   cp -au $1/Runtime/MCFObjectReader.jar     java/lib/ext/MCFObjectReader.jar
   cp -au $1/Runtime/libmcfobjectreader.so   java/lib/aarch64/libmcfobjectreader.so

packageScript: |
   rsync -a --delete $1/java ${PWD}
   d=$(mktemp -d)
   rsync -a --delete --exclude ".debug" ./ $d
   buildSwupModule -n "ext-oracle-mcfobjectreader" \
      -p "emmc.hmi" \
      -o "hmi:ext-oracle-mcfobjectreader " -f $d -- \
      -U "Partition=rootfs_ro"
   rm -rf $d
